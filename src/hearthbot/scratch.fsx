#r "../../packages/suave/lib/net40/suave.dll"
#r "../../build/hearthbot.exe"
#r "../../packages/FSharp.Data/lib/net40/FSharp.Data.dll"
#r "../../packages/newtonsoft.json/lib/net40/newtonsoft.json.dll"

open FSharp.Data
open Newtonsoft.Json

type Card = {
    artist:string
    attack:int
    cardId:string
    cardSet:string
    collectible:bool
    cost:int
    elite:bool
    faction:string
    flavor:string
    health:int
    img:string
    imgGold:string
    locale:string
    name:string
    playerClass:string
    rarity:string
    text:string
    ``type``:string
}

let sample = """[{"cardId":"XXX_096","name":"AI Buddy - Damage Own Hero 5","cardSet":"Debug","type":"Minion","cost":0,"attack":1,"health":1,"text":"Spawn into play to smack your own hero for 5.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_096.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_096_premium.gif","locale":"enUS"},{"cardId":"XXX_001","name":"Damage 1","cardSet":"Debug","type":"Spell","rarity":"Common","cost":0,"text":"Deal $1 damage.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_001.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_001_premium.gif","locale":"enUS","mechanics":[{"name":"ImmuneToSpellpower"}]},{"cardId":"XXX_002","name":"Damage 5","cardSet":"Debug","type":"Spell","rarity":"Common","cost":0,"text":"Deal $5 damage.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_002.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_002_premium.gif","locale":"enUS","mechanics":[{"name":"ImmuneToSpellpower"}]},{"cardId":"XXX_060","name":"Damage All","cardSet":"Debug","type":"Spell","cost":0,"text":"Set the Health of a character to 0.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_060.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_060_premium.gif","locale":"enUS","mechanics":[{"name":"ImmuneToSpellpower"}]},{"cardId":"XXX_020","name":"Damage all but 1","cardSet":"Debug","type":"Spell","rarity":"Common","cost":0,"text":"Set the Health of a character to 1.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_020.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_020_premium.gif","locale":"enUS","mechanics":[{"name":"ImmuneToSpellpower"}]},{"cardId":"XXX_024","name":"Damage Reflector","cardSet":"Debug","type":"Minion","rarity":"Common","cost":0,"attack":3,"health":10,"text":"Whenever this minion takes damage, deal 1 damage to ALL other characters.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/XXX_024.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/XXX_024_premium.gif","locale":"enUS"},{"cardId":"CS2_mirror","name":"Mirror Image","cardSet":"Basic","type":"Minion","faction":"Neutral","rarity":"Free","cost":0,"attack":0,"health":2,"text":"<b>Taunt</b>","playerClass":"Mage","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/CS2_mirror.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/CS2_mirror_premium.gif","locale":"enUS","mechanics":[{"name":"Taunt"}]},{"cardId":"LOEA16_16","name":"Rummage","cardSet":"The League of Explorers","type":"Hero Power","cost":0,"text":"Find an artifact.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/LOEA16_16.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/LOEA16_16_premium.gif","locale":"enUS"},{"cardId":"TB_ClassRandom_Mage","name":"Second Class: Mage","cardSet":"Tavern Brawl","type":"Spell","cost":0,"text":"Add Mage cards to your deck.","playerClass":"Mage","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/TB_ClassRandom_Mage.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/TB_ClassRandom_Mage_premium.gif","locale":"enUS"},{"cardId":"skele21","name":"Damaged Golem","cardSet":"Classic","type":"Minion","faction":"Neutral","rarity":"Common","cost":1,"attack":2,"health":1,"race":"Mech","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/skele21.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/skele21_premium.gif","locale":"enUS"},{"cardId":"KARA_00_09","name":"Mage Armor","cardSet":"Karazhan","type":"Spell","cost":1,"text":"Gain 10 Armor.","artist":"Arthur Bozonnet","playerClass":"Mage","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/KARA_00_09.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/KARA_00_09_premium.gif","locale":"enUS"},{"cardId":"CS2_027","name":"Mirror Image","cardSet":"Basic","type":"Spell","faction":"Neutral","rarity":"Free","cost":1,"text":"Summon two 0/2 minions with <b>Taunt</b>.","flavor":"Oh hey it's Mirror Image! !egamI rorriM s'ti yeh hO","artist":"Jim Nelson","collectible":true,"playerClass":"Mage","howToGet":"Unlocked at Level 4.","howToGetGold":"Unlocked at Level 36.","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/CS2_027.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/CS2_027_premium.gif","locale":"enUS","mechanics":[{"name":"Taunt"}]},{"cardId":"TBST_002","name":"OLDN3wb Mage","cardSet":"Tavern Brawl","type":"Minion","cost":1,"attack":2,"health":1,"text":"At the end of your turn, deal 1 damage to random enemy minion.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/TBST_002.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/TBST_002_premium.gif","locale":"enUS"},{"cardId":"KARA_00_08","name":"Archmage's Apprentice","cardSet":"Karazhan","type":"Minion","cost":2,"attack":2,"health":4,"text":"Whenever you cast a spell, shuffle a copy of it into your deck.","artist":"Evgeniy Zaqumyenny","playerClass":"Mage","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/KARA_00_08.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/KARA_00_08_premium.gif","locale":"enUS"},{"cardId":"EX1_012","name":"Bloodmage Thalnos","cardSet":"Classic","type":"Minion","faction":"Neutral","rarity":"Legendary","cost":2,"attack":1,"health":1,"text":"<b>Spell Damage +1</b>. <b>Deathrattle:</b> Draw a card.","flavor":"He's in charge of the Annual Scarlet Monastery Blood Drive!","artist":"Alex Horley Orlandelli","collectible":true,"elite":true,"playerClass":"Neutral","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/EX1_012.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/EX1_012_premium.gif","locale":"enUS","mechanics":[{"name":"Deathrattle"},{"name":"Spell Damage"}]},{"cardId":"LOEA16_16H","name":"Rummage","cardSet":"The League of Explorers","type":"Hero Power","cost":2,"text":"Find an artifact.","playerClass":"Neutral","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/LOEA16_16H.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/LOEA16_16H_premium.gif","locale":"enUS"},{"cardId":"KARA_00_05","name":"Archmage's Insight","cardSet":"Karazhan","type":"Spell","cost":3,"text":"Your spells cost (0) this turn.","artist":"Kevin Chen","playerClass":"Mage","img":"http://wow.zamimg.com/images/hearthstone/cards/enus/original/KARA_00_05.png","imgGold":"http://wow.zamimg.com/images/hearthstone/cards/enus/animated/KARA_00_05_premium.gif","locale":"enUS"},{"cardId":"EX1_582","name":"Dalaran Mage","cardSet":"Basic","type":"Minion","faction":"Neutral","rarity":"Free","cost":3,"attack":1,"health":4,"text":"<b>Spell Damage +1</b>","flavor":"You don't see a lot of Dalaran warriors.","artist":"Jim Nelson","collectible":true,"playerClass":"Neutral","howToGetGold":"Unlocked at Mage Level 59.","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/EX1_582.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/EX1_582_premium.gif","locale":"enUS","mechanics":[{"name":"Spell Damage"}]},{"cardId":"EX1_612","name":"Kirin Tor Mage","cardSet":"Classic","type":"Minion","faction":"Neutral","rarity":"Rare","cost":3,"attack":4,"health":3,"text":"[x]<b>Battlecry:</b> The next <b>Secret</b>\\nyou play this turn costs (0).","flavor":"The Kirin Tor reside in the floating city of Dalaran.  How do you make a Dalaran float?  Two scoops of ice cream, one scoop of Dalaran.","artist":"Popo Wei","collectible":true,"playerClass":"Mage","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/EX1_612.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/EX1_612_premium.gif","locale":"enUS","mechanics":[{"name":"Secret"},{"name":"Battlecry"}]},{"cardId":"EX1_584","name":"Ancient Mage","cardSet":"Classic","type":"Minion","faction":"Neutral","rarity":"Rare","cost":4,"attack":2,"health":5,"text":"<b>Battlecry:</b> Give adjacent_minions <b>Spell_Damage +1</b>.","flavor":"Sometimes he forgets and just wanders into someone else's game.","artist":"Howard Lyon","collectible":true,"playerClass":"Neutral","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/EX1_584.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/EX1_584_premium.gif","locale":"enUS","mechanics":[{"name":"Spell Damage"},{"name":"Battlecry"}]},{"cardId":"GVG_004","name":"Goblin Blastmage","cardSet":"Goblins vs Gnomes","type":"Minion","rarity":"Rare","cost":4,"attack":5,"health":4,"text":"<b>Battlecry:</b> If you have a Mech, deal 4 damage randomly split among all enemies.","flavor":"If you can't find a bomb to throw, just pick up any goblin invention and throw that.","artist":"Glenn Rane","collectible":true,"playerClass":"Mage","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/GVG_004.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/GVG_004_premium.gif","locale":"enUS","mechanics":[{"name":"Battlecry"}]},{"cardId":"GVG_109","name":"Mini-Mage","cardSet":"Goblins vs Gnomes","type":"Minion","rarity":"Epic","cost":4,"attack":4,"health":1,"text":"<b>Stealth</b>\\n<b>Spell Damage +1</b>","flavor":"He is sometimes found hiding in the treasure chest in the Gurubashi Arena.","artist":"Ben Olson","collectible":true,"playerClass":"Neutral","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/GVG_109.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/GVG_109_premium.gif","locale":"enUS","mechanics":[{"name":"Spell Damage"},{"name":"Stealth"}]},{"cardId":"CS2_155","name":"Archmage","cardSet":"Basic","type":"Minion","faction":"Alliance","rarity":"Free","cost":6,"attack":4,"health":7,"text":"<b>Spell Damage +1</b>","flavor":"You earn the title of Archmage when you can destroy anyone who calls you on it.","artist":"Steve Ellis","collectible":true,"playerClass":"Neutral","howToGetGold":"Unlocked at Mage Level 57.","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/CS2_155.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/CS2_155_premium.gif","locale":"enUS","mechanics":[{"name":"Spell Damage"}]},{"cardId":"EX1_559","name":"Archmage Antonidas","cardSet":"Classic","type":"Minion","faction":"Neutral","rarity":"Legendary","cost":7,"attack":5,"health":7,"text":"Whenever you cast a spell, add a 'Fireball' spell to_your hand.","flavor":"Antonidas was the Grand Magus of the Kirin Tor, and Jaina's mentor.  This was a big step up from being Grand Magus of Jelly Donuts.","artist":"Wayne Reynolds","collectible":true,"elite":true,"playerClass":"Mage","img":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/EX1_559.png","imgGold":"http://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/EX1_559_premium.gif","locale":"enUS"}]"""

let fromJson<'a> json =
  JsonConvert.DeserializeObject<'a>(json)
let cards = fromJson<Card list> sample